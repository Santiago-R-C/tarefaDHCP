services:
  ned:
    build: ./kea
    container_name: ned
    networks:
      dhcp_lab:
        ipv4_address: 192.168.10.10
    cap_add:
      - NET_ADMIN
    volumes:
      - ./ned/dhcp4.json:/etc/kea/kea-dhcp4.conf
      - ./ned/dhcp:/var/lib/kea
  
  cliente1:
    build: ./cliente
    container_name: client1
    networks:
      dhcp_lab:
        ipv4_address: 192.168.10.3
        mac_address: 02:42:ac:11:00:10  # direcciÃ³n HW fija
    cap_add:
      - NET_ADMIN
    command: >
      sh -c "dhclient -v eth0 && sleep infinity"

  cliente2:
    build: ./cliente
    container_name: client2
    networks:
      dhcp_lab:
        ipv4_address: 192.168.10.4
        mac_address: 06:a3:7c:56:ca:f3
    cap_add:
      - NET_ADMIN
    command: >
      sh -c "dhclient -v eth0 && sleep infinity"

  cliente3:
    build: ./cliente
    container_name: client3
    networks:
      dhcp_lab:
        ipv4_address: 192.168.10.5
        mac_address: a2:ba:65:be:8a:d2
    cap_add:
      - NET_ADMIN
    command: >
      sh -c "dhclient -v eth0 && sleep infinity"

  cliente4:
    build: ./cliente
    container_name: client4
    networks:
      dhcp_lab:
        ipv4_address: 192.168.10.6
        mac_address: ae:a6:32:cd:93:ef
    cap_add:
      - NET_ADMIN
    command: >
      sh -c "dhclient -v eth0 && sleep infinity"

networks:
  dhcp_lab:
    driver: bridge
    ipam:
      config:
        - subnet: 192.168.10.0/24